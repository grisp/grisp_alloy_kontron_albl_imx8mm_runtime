{erl_opts, [debug_info]}.
{deps, [
    certifi,
	{grisp_netman, {git, "https://github.com/grisp/grisp_netman.git", {branch, "main"}}},
	{grisp_time, {git, "https://github.com/grisp/grisp_time.git", {branch, "main"}}},
	{grisp_connect, {git, "https://github.com/grisp/grisp_connect.git", {branch, "main"}}},
	{grisp_updater_kalblimx8mm, {git, "https://github.com/grisp/grisp_updater_kalblimx8mm.git", {branch, "main"}}}
]}.

{relx, [
    {release, {grisp_runtime, "0.2.0"}, [
        runtime_tools,
        grisp_updater_kalblimx8mm,
        grisp_runtime
    ]},
    {include_erts, true},
    {sys_config, "./config/sys.config"},
    {vm_args, "./config/vm.args"},
    {extended_start_script, true},
    {include_src, false}
]}.

{profiles, [
    {prod, [
        {relx, [{sys_config, "config/sys.config"}]}
    ]},
    {dev, [
        {relx, [{sys_config, "config/dev.config"}]}
    ]},
    {braid, [
        {relx, [{sys_config, "config/braid.config"}]}
    ]},
    {local, [
        {overrides, [
            {add, grisp_updater_kalblimx8mm, [{erl_opts, [{d, 'EMULATE_HARDWARE'}]}]}
        ]},
        {shell, [
            {apps, [grisp_runtime, grisp_updater, grisp_updater_kalblimx8mm]},
            {config, "config/local.config"}
        ]}
    ]}
]}.
